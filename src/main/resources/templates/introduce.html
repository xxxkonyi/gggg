<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>高原之宝 - 全部宣言</title>
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta content="telephone=no" name="format-detection"/>
  <link rel="stylesheet" th:href="@{${application.resourceBase}+'css/global.css'}"/>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.1.0.js"></script>
</head>
<body data-design-width="640">
<section class="top">
  <img class="logo" th:src="@{${application.resourceBase}+'imgs/logo.png'}"/>
</section>
<section class="introduce">
  <p class="static">如果你想参加宣言活动
    <br>请长按扫描二维码关注，点击自定义菜单：健康宣言，点击发起宣言，即可参与活动！</p>
  <img th:src="@{${application.resourceBase}+'imgs/data2.jpg'}"/>
</section>
<script th:src="@{${application.resourceBase}+'js/jquery-3.1.1.min.js'}"></script>
<script th:src="@{${application.resourceBase}+'js/MobileReponsive.js'}"></script>
<script>
  // todo web 修改
  $(window).ready(function () {
    console.log('页面加载....');
    $.ajax({
      url: '/wx/config',
      type: 'POST',
      dataType: 'json',
      headers: {
        "Content-Type": "application/json;charset=UTF-8"
      },
      data: JSON.stringify({"uri": 'introduce'}),
      success: function (data) {
        if (data.code == "ok") {
          if (data.body) {
            var body = data.body;
            wx.config({
              debug: true,
              appId: body.appId,
              timestamp: body.timestamp,
              nonceStr: body.nonceStr,
              signature: body.signature,
              jsApiList: ["onMenuShareTimeline"]
            });
          }
        } else if (data.code == "fail") {
          console.log(data);
          if (data.body) {
            alert(data.body);
          }
        }
      },
      error: function (jqXHR, textStatus, errorThrown) {
        console.log("请求失败", jqXHR.responseText);
        var errorMessage = JSON.parse(jqXHR.responseText);
        alert(errorMessage.message);
      }
    });
    wx.ready(function () {
        wx.onMenuShareTimeline({
          title: 'yyyy', // 分享标题
          link: 'http://www.baidu.com/', // 分享链接
          imgUrl: 'xxxx', // 分享图标
          success: function () {
            alert("分享成功");
          },
          cancel: function () {
            alert("取消分享");
          }
        });
      })
    wx.error(function (res) {
      console.log(res);
    });

  });
</script>
</body>
</html>
